<!DOCTYPE html>
<html lang="en" xmlns:th="http:www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta >
    <title>旅游项目列表</title>
    <link th:href="@{/bootstrap-3.3.7-dist/css/bootstrap.css}" href="../../../static/bootstrap-3.3.7-dist/css/bootstrap.css"
          rel="stylesheet">
    <link th:href="@{/assets/css/style.css}" href="../../../static/assets/css/style.css" rel="stylesheet">
   <link rel="stylesheet" th:href="@{/layui/css/layui.css}" href="../../../static/layui/css/layui.css">
</head>
<style>
    .table tbody tr td, thead tr th {
        text-align: center;
        padding: 0;
    }

    #menu h1 {
        cursor: pointer;
        color: #6f6f6f;
        font-size: 20px;
        padding: 5px 0 3px 10px;
        border: beige 1px solid;
        margin-top: 1px;
        background-color: #E2E4FB;
    }

    #menu h2 {
        cursor: pointer;
        color: #777;
        font-size: 15px;
        padding: 5px 0 3px 10px;
        border: #E7E7E7 1px solid;
        border-top-color: #FFF;
        background-color: #F4F4F4;
        margin: 5px 0 0 0
    }

    #menu ul {
        padding-left: 15px;
        border: #E7E7E7 1px solid;
        border-top: none;
    }

    #menu ul li {
        padding: 5px 0 3px 10px;
    }

    .no {
        display: none;
    }

    a {
        cursor: pointer;
        font-size: 20px;
    }

    /*弹窗样式*/
    .bulle {
        display: none;
        position: fixed;
        top: 20%;
        left: 50%;
        min-width: 200px;
        margin-left: -100px;
        z-index: 99999;
        padding: 15px;
        border: 1px solid transparent;
        border-radius: 4px;
        background-color: red;
    }

    .bulle-alert {
        background-color: greenyellow;
        color: black;
    }
    .bulle-error {
        background-color: red;
        color: black;
    }
</style>
<body>

<div class="container-fluid">
    <div class="row">
        <div class="col-lg-12 p-0">
            <div class="page-header">
                <div class="page-title">
                    <h1>旅游项目管理</h1>
                </div>
                <ol class="breadcrumb text-right">
                    <li><a>景点列表</a></li>
                </ol>
            </div>
        </div><!-- /# column -->
    </div><!-- /# row -->
    <p th:if="${error}" th:text="${error}" style="color: red"></p>
    <p th:if="${success}" th:text="${success}" style="color: green"></p>
    <div class="col-lg-12">
        <div class="card alert" style="height: 1000px">
            <div class="favourite-menu-details">
                <table class="table">
                    <thead>
                    <tr>
                        <th>
                            <div class="favourite-menu-des" style="width:300px;margin-right: 0">
                                <div class="product_name">
                                    <h4>景点名称</h4>
                                </div>
                            </div>
                        </th>
                    </tr>
                    </thead>
                </table>
                <!--遍历-->
                <div id="menu">
                    <div th:each="place:${placeList}">
                        <span style="font-size: 15px;position: absolute;right:150px;color: white"><span>国家:<span
                                th:text="${place.city.name}">中国</span></span> &nbsp;&nbsp;&nbsp;&nbsp;<span>经/纬:<span
                                th:text="${place.position.p1}+'/'+${place.position.p2}"></span></span></span>
                        <h1 class="project" style="background-color:#5FB8B4;color: white"> + <span th:text="${place.name}">项目</span></h1>
                        <span class="no">
                        <h2 class="subitems"> + 自由行</h2>
                        <ul class="no">
                              <form>
                                  <input type='hidden' name='type' value='0'> <!--自驾游类型-->
                                  <input type="hidden" name="placeId" th:value="${place.id}">
                           <table class="table table-hover" style="margin: 0;table-layout: fixed;">
                                <thead>
                                    <tr>
                                        <th>编号</th>
                                        <th>标题</th>
                                        <th>小标题</th>
                                        <th>发车城市</th>
                                        <th>出行天数</th>
                                        <th>价格</th>
                                        <th>酒店规格</th>
                                        <th>好评率</th>
                                        <th>发布时间</th>
                                        <th>上/下架</th>
                                        <th style="text-align: center">操作</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td>编号</td>
                                        <td>标题</td>
                                        <td>小标题</td>
                                        <td>发车城市</td>
                                        <td>出行天数</td>
                                        <td>价格</td>
                                        <td>酒店规格</td>
                                         <td>好评率</td>
                                        <td>发布时间</td>
                                        <td>上下架</td>
                                        <td>
                                            <input type="radio" name="isOk" value="0"><label>上架</label> |
                                            <input type="radio" name="isOk" value="1"><label>下架</label>
                                        </td>
                                        <td>
                                            <a th:href="@{'/admin/place/edit?id='}" class="btn btn-info btn-xs"
                                               data-toggle="tooltip" data-placement="top" title="点击进入可修改信息">修改</a>
                                            <a th:href="@{'/admin/place/delete?id='}" class="btn btn-danger btn-xs"
                                               onClick="return confirm('确定删除?,删除后加入回收站!');" data-toggle="tooltip"
                                               data-placement="top" title="删除后加入回收站!">删除</a>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td colspan="11"><a class="add layui-btn layui-btn-sm btn-warning" style="display: block;font-size: 10px"><i class="layui-icon">+</i> 添加新增</a></td>
                                    </tr>
                                </tbody>
                            </table>
                              </form>
                        </ul>
                        <h2 class="subitems"> + 国内游</h2>
                        <ul class="no">
                            <form>
                                <input type='hidden' name='type' value='1'><!--国内游-->
                                <input type="hidden" name="placeId" th:value="${place.id}">
                            <table class="table table-hover" style="table-layout: fixed;">
                                <thead>
                                    <tr>
                                         <th>编号</th>
                                        <th>标题</th>
                                        <th>小标题</th>
                                        <th>发车城市</th>
                                        <th>出行天数</th>
                                        <th>价格</th>
                                        <th>酒店规格</th>
                                        <th>好评率</th>
                                        <th>发布时间</th>
                                        <th style="text-align: center">操作</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td>编号</td>
                                        <td>标题</td>
                                        <td>小标题</td>
                                        <td>发车城市</td>
                                        <td>出行天数</td>
                                        <td>价格</td>
                                        <td>酒店规格</td>
                                        <td>好评率</td>
                                        <td>发布时间</td>
                                        <td>
                                            <input type="radio" id="is0" name="isOk" value="0"><label
                                                for="is0">已上架</label>
                                            <input type="radio" id="is1" name="isOk" value="1"><label
                                                for="is1">已下架</label>
                                        </td>
                                        <td>
                                            <a th:href="@{'/admin/trip/edit?id='}" class="btn btn-info btn-xs"
                                               data-toggle="tooltip" data-placement="top" title="点击进入可修改信息">修改</a>
                                            <a th:href="@{'/admin/trip/delete?id='}" class="btn btn-danger btn-xs"
                                               onClick="return confirm('确定删除?,删除后加入回收站!');" data-toggle="tooltip"
                                               data-placement="top" title="删除后加入回收站!">删除</a>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td colspan="11"><a class="add layui-btn layui-btn-sm btn-warning" style="display: block;font-size: 10px"><i class="layui-icon">+</i> 添加新增</a></td>
                                    </tr>
                                </tbody>
                            </table>
                            </form>
                        </ul>
                        <h2 class="subitems"> + 境外游</h2>
                        <ul class="no">
                              <form>
                                  <input type='hidden' name='type' value='2'><!--境外游-->
                                  <input type="hidden" name="placeId" th:value="${place.id}">
                           <table class="table table-hover" style="table-layout: fixed;">
                                <thead>
                                    <tr>
                                        <th>编号</th>
                                        <th>标题</th>
                                        <th>小标题</th>
                                        <th>发车城市</th>
                                        <th>出行天数</th>
                                        <th>价格</th>
                                        <th>酒店规格</th>
                                        <th>好评率</th>
                                        <th>发布时间</th>
                                        <th>是否上架</th>
                                        <th style="text-align: center">操作</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td>编号</td>
                                        <td>标题</td>
                                        <td>小标题</td>
                                        <td>发车城市</td>
                                        <td>出行天数</td>
                                        <td>价格</td>
                                        <td>酒店规格</td>
                                        <td>好评率</td>
                                        <td>发布时间</td>
                                        <td>
                                            <input type="radio" name="isOk" value="0"><label
                                                for="is0">已上架</label>
                                            <input type="radio" name="isOk" value="1"><label
                                                for="is1">已下架</label>
                                        </td>
                                        <td>
                                            <a th:href="@{'/admin/place/edit?id='}" class="btn btn-info btn-xs"
                                               data-toggle="tooltip" data-placement="top" title="点击进入可修改信息">修改</a>
                                            <a th:href="@{'/admin/place/delete?id='}" class="btn btn-danger btn-xs"
                                               onClick="return confirm('确定删除?,删除后加入回收站!');" data-toggle="tooltip"
                                               data-placement="top" title="删除后加入回收站!">删除</a>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td colspan="11">
                                            <a class="add layui-btn layui-btn-sm btn-warning" style="display: block;font-size: 10px"><i class="layui-icon">+</i> 添加新增</a></td>
                                    </tr>
                                </tbody>
                            </table>
                              </form>
                        </ul>
                    </span>
                    </div>
                </div>
                <!--分页-->
                <nav aria-label="Page navigation" style="text-align: center;">
                    <ul class="pagination" style="margin: 0;height:20px;">
                        <li class="disabled" th:class="${this==1?'disabled':''}" th:switch="${this}">
                            <a th:case="1" aria-label="Previous">
                                <span aria-hidden="true">&laquo;</span>
                            </a>
                            <a th:case="*" th:unless=${key} th:href="@{'/admin/trip/list?pageNum='+${this-1}}" aria-label="Previous">
                                <span aria-hidden="true">&laquo;</span>
                            </a>
                            <a th:case="*" th:if=${key} th:href="@{'/admin/trip/key?pageNum='+${this-1}+'&key='+${key}+'&type='+${type}}" aria-label="Previous">
                                <span aria-hidden="true">&laquo;</span>
                            </a>
                        </li>

                        <li th:each="i:${#numbers.sequence(1,pages)}">
                            <a th:unless="${key}" th:href="@{'/admin/trip/list?pageNum='+${i}}" th:text="${i}">1</a>
                            <a th:if="${key}" th:href="@{'/admin/trip/key?key='+${key}+'&pageNum='+${i}+'&type='+${type}}" th:text="${i}">1</a>
                        </li>

                        <li th:class="${this == pages?'disabled':''}" th:switch="${this}">
                            <a th:case='${pages}' aria-label="Next"><span aria-hidden="true">&raquo;</span></a>
                            <a th:case='${pages+1}' aria-label="Next"><span aria-hidden="true">&raquo;</span></a>
                            <a th:case='*' th:unless="${key}" th:href="@{'/admin/trip/list?pageNum='+${this + 1}}" aria-label="Next"><span aria-hidden="true">&raquo;</span></a>
                            <a th:case='*' th:if="${key}" th:href="@{'/admin/trip/key?pageNum='+${this + 1}+'&key='+${key}+'&type='+${type}}" aria-label="Next"><span aria-hidden="true">&raquo;</span></a>
                        </li>
                    </ul>
                </nav>
            </div>
            <!--增改查-->
            <div>
                <a th:href="@{'/admin/place/edit'}" class="btn btn-success" data-toggle="tooltip"
                   data-placement="bottom" title="添加新景点">添加景点</a>&nbsp;&nbsp;&nbsp;&nbsp;
                <a th:href="@{'/admin/trip/list'}" class="btn btn-success" data-toggle="tooltip"
                   data-placement="bottom" title="显示全部">查询全部景点</a>&nbsp;&nbsp;&nbsp;&nbsp;
                <a type="button" class="btn btn-primary" data-toggle="modal" data-target="#exampleModal">搜索景点</a>
            </div>
        </div>
    </div>
</div>
<!--选择发车地区-->
<div id="start" class="modal fade bs-example-modal-sm " tabindex="-1" role="dialog" aria-labelledby="mySmallModalLabel">
    <div class="modal-dialog modal-sm" role="document">
        <div class="modal-content" style="margin-bottom: 10px;padding: 5px;width: 650px;">
            <h3 style="border-bottom: 1px black solid">请选择发车地点:<span style="color: red">*</span><span
                    style="font-size: 15px">请正确输入对应的城市,如不是县城或城市则留空不填!</span></h3>
            <p>可从右边选择,不存在可手动录入:</p>
                省份：<input type="text" name="province" autocomplete="off" required style="height: 30px;border-radius: 5px;">
                省份：<select id="province" hidden name="province"></select><br/>
                城市：<input type="text" name="city" required autocomplete="off" style="height: 30px;border-radius: 5px;"/>城市：<select id="city" hidden name="city"></select><br/>
                地区：<input type="text" name="area" required autocomplete="off" style="height: 30px;border-radius: 5px;" />地区：<select id="area" hidden name="area"></select><br/>
            <a class="btn btn-success start">确定</a>
        </div>
    </div>
</div>
<!--弹窗查询-->
<div class="modal fade" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel">
    <div class="modal-dialog" role="document" style="margin: -100px auto;width: 500px;">
        <div class="modal-content">
            <div class="modal-body">
                <form action="/admin/trip/key" method="post">
                    <div class="form-group">
                        <label class="control-label">需要查找的类型:</label><br/>
                        <div class="input-group" >
                            <div class="input-group-btn">
                                <select name="type" class="btn btn-info" style="background-color: #b4dbed">
                                    <option value="0">国家</option>
                                    <option value="-1">景点名称</option>
                                </select>
                            </div><!-- /btn-group -->
                            <input type="text" name="key" class="form-control" placeholder="请输入关键字...."><span
                                class="input-group-btn"><button class="btn btn-success">搜索!</button></span>
                        </div><!-- /input-group -->
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>
<!--用来作为弹窗效果-->
<div class="bulle"></div>
<!-- 产品详情页 -->
<div class="modal fade detailBox"  tabindex="-1" role="dialog" aria-labelledby="myLargeModalLabel">
    <div class="modal-dialog modal-lg" role="document">
        <div class="modal-content" style="height: 600px;overflow-x:hidden;padding: 15px;word-wrap: break-word;position: relative;border: 2px solid #D9EDF7 ">
            <span class="label label-default">产品详情</span>
            <h2 class="h2" style="border-bottom: 1px solid silver;margin: 5px 0 5px 0">产品详情页</h2>
            <p id="id" hidden></p>
            <ul class="nav nav-tabs nav-justified" id="myTabs" >
               <li class="active" ><a href="#place" id="home-tab" role="tab" data-toggle="tab" aria-controls="home" aria-expanded="true" style="background-color:#00838F;color: white">景区说明</a></li>
               <li ><a href="#hotel" role="tab" id="home-hotel" data-toggle="tab" aria-controls="hotel" aria-expanded="false">酒店</a></li>
               <li><a href="#food" id="home-food" role="tab" data-toggle="tab" aria-controls="food" aria-expanded="false">美食</a></li>
            </ul>
            <!--景区说明-->
            <div id="place" aria-labelledby="home-tab" class="tab-pane fade active in" contenteditable="true" style="text-indent: 2em;padding: 10px;position: absolute;display: block">
                暂无记录 景区介绍
            </div>
            <!--酒店说明-->
            <div id="hotel" aria-labelledby="home-hotel" class="tab-pane fade" contenteditable="true" style="text-indent: 2em;padding: 10px;position:absolute;display: none">
                暂无记录 酒店说明
            </div>
            <!--美食说明-->
            <div id="food"  aria-labelledby="home-food" class="tab-pane fade" contenteditable="true" style="text-indent: 2em;padding: 10px;position: absolute;display: none">
                暂无记录 美食
            </div>
        </div>
    </div>
</div>
<!-- 旅游主题弹窗选择器 -->
<div class=" modal fade themeBox" tabindex="-1" role="dialog" aria-labelledby="myLargeModalLabel">
    <div class="modal-dialog modal-lg" role="document">
        <div class="modal-content" style="padding: 15px;word-wrap: break-word;">
            <span class="label label-primary ">旅游主题</span>
            <h2 id="themeTitle" style="border-bottom: 1px solid silver;margin: 5px 0 5px 0">旅游主题</h2>
            <p class="tripId" hidden></p>
            <div style="border-bottom: 1px solid black">
                <h5 id="thisTitle">当前主题</h5>
            </div>
            <div>
                <h5 id="themeAll">所有主题</h5>
            </div>
        </div>
    </div>
</div>
<!--景区价格操作-->
<div class=" modal fade tripPriceBox" tabindex="-1" role="dialog" aria-labelledby="myLargeModalLabel">
    <div class="modal-dialog modal-lg" role="document">
        <div class="modal-content" style="padding: 15px;word-wrap: break-word;">
            <span class="label label-primary ">价格</span>
            <h2 id="priceTitle" style="border-bottom: 1px solid silver;margin: 5px 0 5px 0">价格</h2>
            <!--单日期选择-->
            <div style="margin-bottom: 10px;border-bottom: 1px solid sandybrown">
                <div class="layui-inline">
                    <label >单日期选择</label>
                    <div class="layui-input-inline" style="width:200px;">
                        <input id="dateDay"  type="text" name="dateDay" autocomplete="off"  class="layui-input">
                    </div>
                </div>
                <div class="layui-inline">
                    <label>价格/人(单位:RMB)</label>
                    <div class="layui-input-inline" style="width: 100px;">
                        <input type="text" name="priceDay" placeholder="￥" autocomplete="off"  class="layui-input">
                    </div>
                </div>
                <a id="day" class="btn btn-success">添加</a>
            </div>
            <div class="layui-inline">
                <label style="margin-left: 14px;">日期区间</label>
                <div class="layui-input-inline" style="width:300px;">
                    <input id="date"  type="text" name="date" autocomplete="off"  class="layui-input">
                </div>
            </div>
            <div class="layui-inline">
                <label>价格/人(单位:RMB)</label>
                <div class="layui-input-inline" style="width: 100px;">
                    <input type="text" name="price" placeholder="￥" autocomplete="off"  class="layui-input">
                </div>
            </div>
            <a id="pricesSave" class="btn btn-success">添加</a>
            <!--静态显示价格-->
            <div id="dateBox" style="margin-top: 20px;">
                <h2 id="dateH2">当前景区所有日期价格<small>(单位:人/RMB):</small></h2>
                <!--遍历日期-->
                <div>
                    <!--年月份-->
                    <div class="layui-laydate-header">
                        <div class="laydate-set-ym">
                                <p id="year" style="cursor: pointer" lay-key="1">2019年</p>
                                <p id="month" style="cursor: pointer" lay-key="2">07月</p>
                        </div>
                    </div>
                    <!--日期-->
                    <div class="layui-laydate-content">
                        <table class="table table-hover">
                            <thead>
                                <tr>
                                    <th>日</th>
                                    <th>一</th>
                                    <th>二</th>
                                    <th>三</th>
                                    <th>四</th>
                                    <th>五</th>
                                    <th style="text-align: center">六</th>
                                </tr>
                            </thead>
                            <tbody id="priceDay">
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
            <a id="deleteDate" class="btn btn-warning" onclick="return confirm('确定清空当月价格？')">清空所有价格!</a>
        </div>
        <div class="wait" style="position: absolute;background-color:gainsboro;width:920px;height: 650px;top: 0;opacity: 0.7;display: none">
            <p style="text-align: center;margin-top: 263px;font-size: 30px;" ><img th:src="@{'/images/loading.gif'}" src="../../../static/images/loading.gif"></p>
        </div>
    </div>
</div>
<!-- 景区图片操作弹窗 -->
<div class="modal fade imgBox" tabindex="-1" role="dialog" aria-labelledby="myLargeModalLabel">
    <div class="modal-dialog modal-lg" role="document">
        <div class="modal-content" style="height: 600px;overflow-x:hidden;padding: 15px;word-wrap: break-word;position: relative;border: 2px solid #D9EDF7 ">
            <span class="label label-warning">图片</span>
            <h2 id="imgTitle" style="border-bottom: 1px solid silver;margin: 5px 0 5px 0">标题</h2>
            <p class="tripId" hidden></p>
            <div class="row" style="padding: 20px;">
                <!--主图-->
                <div class="col-md-10 col-md-offset-1" style="background-color: #b4dbed;border: 1px solid cadetblue">
                    <p>主图</p>
                    <div class="col-md-10 col-md-offset-1" style="height:450px;background-color: gainsboro;margin-bottom: 10px;padding: 0">
                        <a id="imgMain" style="text-align: center;">
                            <img id="base64Img" src="" style="width: 570px;height:450px;display: none" class="img-thumbnail">
                            <i class="glyphicon glyphicon-plus col-md-12" style="font-size: 400px;margin-left: 10px;margin-top: 0"></i>
                            <a class="deleteImg glyphicon glyphicon-remove" style="color:red;position: absolute;right: 0"></a>
                        </a>
                    </div>
                    <!--主图-->
                    <form id="main" enctype="multipart/form-data">
                        <input type="file" name="fileImg" style="display: none">
                    </form>
                    <h2  class="col-md-12" style="text-align: center" contenteditable="true">图片名称</h2>
                </div>
                <!--子图-->
                <div class="col-md-10 col-md-offset-1" style="border: 1px solid cadetblue;padding: 0">
                    <p>副图</p>
                    <ul class="ui-state-hover" id="ul">
                        <li  class="col-md-3  liDeputy" style="border-bottom: 1px solid rosybrown;padding: 0;margin-bottom: 5px;">
                            <div class="col-md-12" style="height: 160px;background-color: silver;padding: 0">
                                <a  style="text-align: center;" class="btnDeputy">
                                    <i class="glyphicon glyphicon-plus col-md-12" style="font-size:150px;margin-left: 10px;"></i>
                                    <img class="imgDeputy img-thumbnail" src="" style="width: 180px;height: 160px;display: none" >
                                    <a class="deleteImg glyphicon glyphicon-remove" style="color:red;position: absolute;right: 0;font-size: 10px;"></a>
                                </a>
                            </div>
                            <h4 class="col-md-10 col-md-offset-1" style="text-align: center;padding: 0" contenteditable="true">名称</h4>
                        </li>
                    </ul>
                    <!--副图-->
                    <form id="deputy" enctype="multipart/form-data">
                        <input type="file" name="fileImg"  style="display: none">
                    </form>
                </div>
            </div>
            <div class="wait" style="position: absolute;background-color:gainsboro;width:920px;height: 1000px;top: 0;opacity: 0.7;display: none">
                <p style="text-align: center;margin-top: 263px;font-size: 30px;" ><img th:src="@{'/images/loading.gif'}" src="../../../static/images/loading.gif"></p>
            </div>
        </div>
    </div>
</div>

<!-- 行程操作弹窗 -->
<div class="modal fade tripBox"  tabindex="-1" role="dialog" aria-labelledby="myLargeModalLabel">
    <div class="modal-dialog modal-lg" role="document">
        <div class="modal-content" style="height: 600px;overflow-x:hidden;padding: 15px;word-wrap: break-word;position: relative;border: 2px solid #D9EDF7 ">
            <span class="label label-default">行程</span>
            <h2 id="tripTitle" style="border-bottom: 1px solid silver;margin: 5px 0 5px 0">标题</h2>
            <p class="tripId" hidden></p>
            <div class="row" style="padding: 20px;">
                <p class="breadcrumb"><span style="color: green;font-weight: bold">丨</span>行程概览</p>
                <!--时间线-->
                <ul class="layui-timeline ul">
                    <li class="layui-timeline-item li" hidden>
                        <div class="layui-timeline-content layui-text">
                            <h3 class="layui-timeline-title num"><span>第1天</span>&nbsp;&nbsp;&nbsp;&nbsp;<span contenteditable="true">标题</span></h3>
                            <!--提示-->
                            <div>
                                <p style="color: orange"><svg t="1562549533328" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="901" width="20" height="20"><path d="M848.32 879.14H178.71a72 72 0 0 1-62.36-108l334.81-579.91a72 72 0 0 1 124.71 0l334.81 579.91a72 72 0 0 1-62.36 108z m-628-96h586.44L513.52 275.23z m314-543.91z" fill="#2C77E5" p-id="902"></path><path d="M463.79 391.86m48 0l0 0q48 0 48 48l0 141.22q0 48-48 48l0 0q-48 0-48-48l0-141.22q0-48 48-48Z" fill="#1AD8E2" p-id="903"></path><path d="M463.79 656.12m48 0l0 0q48 0 48 48l0 0q0 48-48 48l0 0q-48 0-48-48l0 0q0-48 48-48Z" fill="#1AD8E2" p-id="904"></path></svg>
                                    &nbsp;&nbsp;&nbsp;&nbsp;温馨提示：<span  contenteditable="true" class="prompt" ></span>
                                </p>
                            </div>
                            <p><svg t="1562311174359" class="icon" viewBox="0 0 1122 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="1126" width="20" height="20"><path d="M595.5922 479.094474s-136.201409-61.612658-170.430135-142.922531l-0.123673 0.218805C403.995051 286.322437 356.956714 230.898157 292.247488 185.900416c-113.436167-78.888747-232.618346-110.753426-272.921291-52.798619-40.312459 57.959565-21.233607 243.729839 92.197804 322.609073 71.358998 49.635458 160.897844 51.014881 227.543019 30.784924l-0.48042 0.83241s77.637752-33.077621 155.575173 44.869313c67.135108 67.135108 295.610427 400.898483 590.659572 351.52464 205.077445-34.319102-495.198719-407.705224-489.229145-404.627683z" fill="#D9D0D0" p-id="1127"></path><path d="M537.551773 441.683561c23.0221 13.275761 32.30229 57.950051-106.938608-9.779636-72.705125-35.370318-162.243971 30.009593-290.62072-45.002498C28.244883 321.616649-10.264812 175.197993 19.326197 127.888528c29.586253-47.309465 140.430055-26.565791 252.263237 38.609585 137.961363 80.406112 168.698721 219.142807 265.962339 275.185448z" fill="#EBE2E2" p-id="1128"></path><path d="M389.577698 352.491949c-23.607166 37.753391-137.538023 60.447283-230.706179 2.178537-93.158644-58.268746-130.265132-175.424599-106.65321-213.177989 23.616679-37.753391 118.278419-21.124204 211.441819 37.144541s149.529493 136.10152 125.91757 173.854911z" fill="#D9D0D0" p-id="1129"></path><path d="M1084.826101 847.205491c-295.049145 49.373843-523.52922-284.394288-590.659572-351.529397-77.93742-77.946933-155.575173-44.864556-155.575172-44.864556l0.48042-0.83241c-66.645175 20.225201-156.184021 18.850534-227.54302-30.784925C39.332592 368.992706 5.413048 275.520125 0.637389 199.233256c-5.531963 80.358546 26.627628 197.890173 110.886612 256.477614 71.358998 49.635458 160.897844 51.014881 227.543019 30.784924l-0.48042 0.83241s77.637752-33.077621 155.575173 44.869313c67.135108 67.135108 346.144889 451.432945 590.659572 351.52464 39.846309-16.286709 41.97728-26.147208 28.111697-52.303929-6.568909 7.277647-9.527534 12.681182-28.106941 15.787263z" fill="#C2B9B9" p-id="1130"></path><path d="M1081.948339 813.095681c-15.249763 20.087258-185.304124-19.554515-298.91153-105.806529-113.593136-86.247257-378.061892-298.450137-362.812129-318.527882 15.24025-20.077745 195.459534 106.58186 418.031873 230.163924 128.091351 71.121166 258.932036 174.092742 243.691786 194.170487z" fill="#EBE2E2" p-id="1131"></path><path d="M83.526463 211.058244c23.611923-37.753391 118.278419-21.128961 211.446576 37.144542 42.210355 26.399309 76.819612 56.817973 99.908304 85.705 1.312831-41.135356-51.438222-105.368919-131.211702-155.270748-93.168157-58.268746-187.829896-74.893176-211.446575-37.144541-15.340139 24.520439-5.032517 82.52757 29.57674 136.149086-7.38705-28.306719-6.916143-52.774835 1.726657-66.583339z" fill="#BFB7B7" p-id="1132"></path><path d="M30.727845 260.474897s80.796156 195.235973 349.698093 160.165323c0 0.004757-252.363127 69.898712-349.698093-160.165323z" fill="#FFF5F5" opacity=".65" p-id="1133"></path><path d="M383.38932 629.08536s26.465902 3.091811 63.57239-50.986341l28.363799-30.07143c55.619301-76.619833 146.818212-166.049277 191.278454-211.075558C744.53187 258.029988 973.511392-32.676351 1013.842878 7.141417c40.326729 39.822526-173.916747 453.454513-251.844654 532.376557-49.031366 49.654485-119.496117 63.905355-175.067852 57.731246l0.49469 0.585066s-66.131459-14.697994-116.190257 58.263989c-43.123628 62.849383-174.401923 359.834477-414.511965 364.210578-166.895957 3.044245 330.923666-394.519839 326.66648-391.223493z" fill="#D9D0D0" p-id="1134"></path><path d="M51.357359 991.483662c240.110042-4.376102 371.388336-301.361196 414.511965-364.201065 50.058798-72.976253 116.190257-58.268746 116.190257-58.268746l-0.49469-0.589823c55.571735 6.169352 126.036486-8.072005 175.067852-57.726489 49.602162-50.234794 267.998177-407.690954 260.554047-468.599631 16.17255 62.606794-197.305108 438.804086-255.188566 497.420066-49.031366 49.654485-119.496117 63.905355-175.067852 57.731246l0.49469 0.585066s-66.131459-14.697994-116.190257 58.263989c-43.123628 62.849383-206.861182 407.139185-414.511965 364.210578-33.843439-7.001763-36.973303-14.464919-29.881164-37.144541 6.259728 4.770902 9.394349 8.590478 24.515683 8.31935z" fill="#C2B9B9" p-id="1135"></path><path d="M40.264892 963.600283c-3.172674 25.010373 149.453387-9.437158 287.547936-176.523381 90.865947-109.949556 317.072352-362.59808 298.407327-379.545961-18.665025-16.947881-160.793198 146.689783-352.92309 313.695143-121.046779 105.21195-226.163596 188.215183-233.032173 242.374199z" fill="#EBE2E2" p-id="1136"></path><path d="M1014.385134 16.297935s-198.37535 454.187035-362.793102 506.4101c-164.398725 52.237336-134.370106-2.35929-229.921336 136.895878l-1.241481-65.703362 501.253912-537.913276s96.802224-92.506985 92.702007-39.68934z" fill="#EBE2E2" p-id="1137"></path><path d="M977.706742 94.42562s-189.480448 384.954252-448.664585 458.487031c0 0 175.847939 14.997662 301.080555-200.920149 125.227858-215.91781 147.58403-257.566882 147.58403-257.566882z" fill="#FFF5F5" opacity=".65" p-id="1138"></path></svg>
                                &nbsp;&nbsp;&nbsp;&nbsp;餐饮：<span contenteditable="true" class="dates">layui 2.0 的一切准备工作似乎都已到位。发布之弦，一触即发。</span></p>
                            <p><svg t="1562311045358" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="848" width="20" height="20"><path d="M427 463.445c0-40.33 32.27-73.445 72.601-73.445H508V258h-67v-79h-57V62h-77v117h-46.717l-0.388 79H183v609h244V463.445z" fill="#BDCCD4" p-id="849"></path><path d="M832 867V463.445c0-40.33-32.63-73.445-72.961-73.445H499.601C459.27 390 427 423.115 427 463.445V867H64v105h897V867H832z m-233 0h-86V756h86v111z m0-160h-86v-85h86v85z m0-146h-86v-86h86v86z m146 306h-85V756h85v111z m0-160h-85v-85h85v85z m0-146h-85v-86h85v86z" fill="#F29440" p-id="850"></path></svg>
                                &nbsp;&nbsp;&nbsp;&nbsp;住宿：<span contenteditable="true" class="hotel">layui 2.0 的一切准备工作似乎都已到位。发布之弦，一触即发。</span></p>
                            <p><svg t="1562383186348" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="1291" width="20" height="20"><path d="M511.3 704.7c-106.1 0-192.5-86.4-192.5-192.5s86.4-192.5 192.5-192.5 192.5 86.4 192.5 192.5-86.4 192.5-192.5 192.5z m0-384c-105.6 0-191.5 85.9-191.5 191.5s85.9 191.5 191.5 191.5 191.5-85.9 191.5-191.5-85.9-191.5-191.5-191.5z" fill="#CCCCCC" p-id="1292"></path><path d="M78 329.8h868v397.8H78V329.8" fill="#FB9761" p-id="1293"></path><path d="M946 737.6H78c-5.5 0-10-4.5-10-10V329.8c0-5.5 4.5-10 10-10h868c5.5 0 10 4.5 10 10v397.8c0 5.5-4.5 10-10 10z m-858-20h848V339.8H88v377.8z" fill="#5A3392" p-id="1294"></path><path d="M769.4 245.2h150.2c14.6 0 26.3 11.8 26.3 26.3v1.2c0 14.6-11.8 26.3-26.3 26.3H104.4c-14.6 0-26.3-11.8-26.3-26.3v-1.2c0-14.6 11.8-26.3 26.3-26.3H704" fill="#E2FBFF" p-id="1295"></path><path d="M919.6 309H104.4c-20 0-36.3-16.3-36.3-36.3v-1.2c0-20 16.3-36.3 36.3-36.3H704c5.5 0 10 4.5 10 10s-4.5 10-10 10H104.4c-9 0-16.3 7.3-16.3 16.3v1.2c0 9 7.3 16.3 16.3 16.3h815.2c9 0 16.3-7.3 16.3-16.3v-1.2c0-9-7.3-16.3-16.3-16.3H769.4c-5.5 0-10-4.5-10-10s4.5-10 10-10h150.2c20 0 36.3 16.3 36.3 36.3v1.2c0 20-16.3 36.3-36.3 36.3z" fill="#5A3392" p-id="1296"></path><path d="M230.2 382.5h715v149.4h-715z" fill="#E2FBFF" p-id="1297"></path><path d="M945.2 541.9h-715c-5.5 0-10-4.5-10-10V382.5c0-5.5 4.5-10 10-10h715c5.5 0 10 4.5 10 10v149.4c0 5.5-4.5 10-10 10z m-705-20h695V392.5h-695v129.4z" fill="#5A3392" p-id="1298"></path><path d="M135.2 716.2c7.3-61.6 59.7-109.3 123.3-109.3 63.5 0 115.9 47.7 123.3 109.3M646.1 717.2c7.3-61.6 59.7-109.3 123.3-109.3 63.5 0 115.9 47.7 123.3 109.3" fill="#EE746C" p-id="1299"></path><path d="M656.5 737.5H512c-5.5 0-10-4.5-10-10v-342c0-5.5 4.5-10 10-10h144.5c5.5 0 10 4.5 10 10v342c0 5.5-4.5 10-10 10z m-134.5-20h124.5v-322H522v322zM371.1 538.7c-5.5 0-10-4.5-10-10V385.2c0-5.5 4.5-10 10-10s10 4.5 10 10v143.5c0 5.5-4.5 10-10 10zM802.1 540c-5.5 0-10-4.5-10-10V386.5c0-5.5 4.5-10 10-10s10 4.5 10 10V530c0 5.5-4.5 10-10 10z" fill="#5A3392" p-id="1300"></path><path d="M117.9 417.2c-5.5 0-10-4.5-10-10v-39c0-5.5 4.5-10 10-10h39c5.5 0 10 4.5 10 10s-4.5 10-10 10h-29v29c0 5.5-4.5 10-10 10z" fill="#FFFFFF" p-id="1301"></path><path d="M118.2 437.7m-10 0a10 10 0 1 0 20 0 10 10 0 1 0-20 0Z" fill="#FFFFFF" p-id="1302"></path><path d="M736.8 245.2m-10 0a10 10 0 1 0 20 0 10 10 0 1 0-20 0Z" fill="#5A3392" p-id="1303"></path><path d="M259.1 730.5m-90.5 0a90.5 90.5 0 1 0 181 0 90.5 90.5 0 1 0-181 0Z" fill="#29A3EC" p-id="1304"></path><path d="M259.2 730.5m-60.9 0a60.9 60.9 0 1 0 121.8 0 60.9 60.9 0 1 0-121.8 0Z" fill="#3CDEF6" p-id="1305"></path><path d="M259.1 831c-29.4 0-57.3-12.8-76.4-35.2-3.6-4.2-3.1-10.5 1.1-14.1 4.2-3.6 10.5-3.1 14.1 1.1a80.41 80.41 0 0 0 61.2 28.2c44.4 0 80.5-36.1 80.5-80.5S303.5 650 259.1 650s-80.5 36.1-80.5 80.5c0 5.5-4.5 10-10 10s-10-4.5-10-10c0-55.4 45.1-100.5 100.5-100.5s100.5 45.1 100.5 100.5S314.5 831 259.1 831z" fill="#5A3392" p-id="1306"></path><path d="M259.2 781.9c-13.4 0-26.1-5.2-35.8-14.5-4-3.9-4-10.2-0.2-14.1s10.2-4 14.1-0.2c5.9 5.7 13.6 8.9 21.8 8.9 9 0 17.5-3.9 23.5-10.6 3.7-4.1 10-4.5 14.1-0.9 4.1 3.7 4.5 10 0.9 14.1-9.7 11-23.7 17.3-38.4 17.3z" fill="#FFFFFF" p-id="1307"></path><path d="M173.5 762.8m-10 0a10 10 0 1 0 20 0 10 10 0 1 0-20 0Z" fill="#5A3392" p-id="1308"></path><path d="M770.7 730.5m-90.5 0a90.5 90.5 0 1 0 181 0 90.5 90.5 0 1 0-181 0Z" fill="#29A3EC" p-id="1309"></path><path d="M770.8 730.5m-60.9 0a60.9 60.9 0 1 0 121.8 0 60.9 60.9 0 1 0-121.8 0Z" fill="#3CDEF6" p-id="1310"></path><path d="M770.7 831c-29.4 0-57.3-12.8-76.4-35.2-3.6-4.2-3.1-10.5 1.1-14.1 4.2-3.6 10.5-3.1 14.1 1.1a80.41 80.41 0 0 0 61.2 28.2c44.4 0 80.5-36.1 80.5-80.5S815.1 650 770.7 650s-80.5 36.1-80.5 80.5c0 5.5-4.5 10-10 10s-10-4.5-10-10c0-55.4 45.1-100.5 100.5-100.5s100.5 45.1 100.5 100.5S826.1 831 770.7 831z" fill="#5A3392" p-id="1311"></path><path d="M770.8 781.9c-13.4 0-26.1-5.2-35.8-14.5-4-3.9-4-10.2-0.2-14.1 3.9-4 10.2-4 14.1-0.2 5.9 5.7 13.6 8.9 21.8 8.9 9 0 17.5-3.9 23.5-10.6 3.7-4.1 10-4.5 14.1-0.9 4.1 3.7 4.5 10 0.9 14.1-9.7 11-23.7 17.3-38.4 17.3z" fill="#FFFFFF" p-id="1312"></path><path d="M685.1 762.8m-10 0a10 10 0 1 0 20 0 10 10 0 1 0-20 0Z" fill="#5A3392" p-id="1313"></path></svg>
                                &nbsp;&nbsp;&nbsp;&nbsp;交通：<span contenteditable="true" class="traffic">layui 2.0 的一切准备工作似乎都已到位。发布之弦，一触即发。</span></p>
                            <!--详情-->
                            <div>
                                <p ><svg t="1562383304231" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="915" width="17" height="17"><path d="M848.020811 0H284.814986C207.97712 0 150.42154 57.613835 150.42154 134.393446v19.22403C86.399694 166.375242 41.601879 223.989077 41.601879 294.418933a136.665377 136.665377 0 0 0 51.205825 108.761406 141.209239 141.209239 0 0 0 0 217.639322A136.665377 136.665377 0 0 0 41.601879 729.581067c0 70.429856 44.797815 121.635681 108.819661 140.801457v19.22403a135.150757 135.150757 0 0 0 134.393446 134.393446h563.205825a135.209011 135.209011 0 0 0 134.393447-134.393446V134.393446C976.006248 57.613835 918.392412 0 848.020811 0zM150.42154 582.546365a77.711685 77.711685 0 0 1 0-140.801457z m0-358.440778v140.684947c-25.63204-12.81602-44.739561-44.797815-44.739561-70.371601s19.107521-57.613835 44.739561-70.429856zM105.681979 729.581067a78.643759 78.643759 0 0 1 44.797815-70.371601v140.801457A78.643759 78.643759 0 0 1 105.681979 729.581067z m806.360678 160.025487a64.0801 64.0801 0 0 1-64.0801 64.0801H284.814986a64.0801 64.0801 0 0 1-64.0801-64.0801V134.393446a64.0801 64.0801 0 0 1 64.0801-64.0801h563.205825a64.0801 64.0801 0 0 1 64.080101 64.0801z" fill="#333333" p-id="916"></path><path d="M335.146992 491.552623h491.552623v68.216179H335.146992z m0 252.533849h491.552623v68.274434H335.146992z" fill="#333333" p-id="917"></path><path d="M335.146992 211.639094h491.552623v68.274434H335.146992z" fill="#00B65F" p-id="918"></path></svg>
                                    &nbsp;&nbsp;&nbsp;&nbsp;日程详情：<span contenteditable="true" class="datesDetail"></span>
                                </p>
                            </div>
                        </div>
                    </li>
                </ul>
            </div>
        </div>
    </div>
</div>
</body>

<script th:src="@{/js/jquery-3.4.1.js}" src="../../../static/js/jquery-3.4.1.js"></script>
<script th:src="@{/bootstrap-3.3.7-dist/js/bootstrap.js}"
        src="../../../static/bootstrap-3.3.7-dist/js/bootstrap.js"></script>

<script th:src="@{/js/trip/tripJavaScript.js}" src="../../../static/js/trip/tripJavaScript.js" type="text/javascript"></script>
<script th:src="@{/js/trip/tripPriceJavaScript.js}" src="../../../static/js/trip/tripPriceJavaScript.js" type="text/javascript"></script>
<script th:src="@{/js/trip/tripThemeJavaScript.js}" src="../../../static/js/trip/tripThemeJavaScript.js" type="text/javascript"></script>
<script th:src="@{/js/trip/tripPictureJavaScript.js}" src="../../../static/js/trip/tripPictureJavaScript.js" type="text/javascript"></script>

<script th:src="@{/laydate/laydate.js}" src="../../../static/laydate/laydate.js"></script>
<script th:src="@{/layui/layui.js}" src="../../../static/layui/layui.js"></script>
<script type="text/javascript">
    $(function () {
        /*行程标题发生变化时*/
        var index = 0;
        $("#tripTitle").bind('DOMNodeInserted',function(){
            if(index == 1){
                var id  = $("#tripTitle").children("span").text();//获取TripId
                //查询
                var url = "/admin/trip/dates/ajax?act=query";
                $.post(url,{tripId:id},function(data){
                    var number = $(".ul").find(".li").length;//获取个数
                    $(".ul > .li:lt("+(number - 1)+")").remove();//除了最后一个不删除其余全部删除
                    console.log(number)
                    $.each(data.list,function(i,v){
                        //复制
                        $('.li:last').clone(true).appendTo($(".ul"));
                        //生成赋值
                        $(".li:eq("+i+")").attr("id",v.id);
                        $(".li:eq("+i+")").attr("hidden",false);//添加id用于后面操作
                        $(".li:eq("+i+")").find(".num").find("span:eq(0)").text("第"+v.num+"天");//第几天
                        $(".li:eq("+i+")").find(".num").find("span:eq(1)").text(v.title);//标题
                        $(".li:eq("+i+")").find(".dates").text(v.meal);//餐饮
                        $(".li:eq("+i+")").find(".hotel").text(v.hotel);//住宿
                        $(".li:eq("+i+")").find(".traffic").text(v.traffic);//交通
                        $(".li:eq("+i+")").find(".datesDetail").text(v.detail);//详情
                        $(".li:eq("+i+")").find(".prompt").text(v.detail);//温馨提示
                    })
                    updateDates($(".num"));
                    updateDates($(".dates"));
                    updateDates($(".hotel"));
                    updateDates($(".traffic"));
                    updateDates($(".datesDetail"));
                    updateDates($(".prompt"));
                })
                index = -1;
            }else{
                index++;
            }
        });
        /*图片标题发生变化时 DOMNodeInserted*/
        $("#imgTitle").bind('DOMNodeInserted',function(){
                $("#main").next("h2").prop("contenteditable",true);//设置标题可编辑
                $(".liDeputy").find("h4").prop("contenteditable",true);
                $("#imgMain").find("i").css("display","block");//
                $("#base64Img").css("display","none");
                $("#base64Img").attr("src","");
                $("#main").next("h2").html("标题");
                $("#imgTitle").next("p").remove();
                $("#base64Img").removeAttr("title");
                $(".liDeputy").find(".imgDeputy").removeAttr("title");
                $("#ul").find(".deleteImg").css("display","none");
                $("#imgMain").next("a").css("display","none");

                var tripId = $("#imgTitle").children("span").text();//获取TripId
                var url = "/admin/trip/img/list?date="+new Date();
                $.get(url,{tripId:tripId},function(data){ //查询d
                    var number = $("#ul").find(".liDeputy").length;//获取个数
                    $("#ul > .liDeputy:lt("+(number - 1)+")").remove();//除了最后一个不删除其余全部删除
                    if(data.list !=""){
                        var index =0;
                        $.each(data.list,function(i,v){
                            if(v.type == 0 ){ //主图
                                $("#imgMain").find("i").css("display","none");
                                $("#base64Img").css("display","block");
                                $("#base64Img").attr("src",v.base64);
                                $("#base64Img").attr("title",v.id);
                                $("#main").next("h2").html(v.name);
                                $("#imgMain").next("a").css("display","block");
                            }else{ //子图
                                $('.liDeputy:last').clone(true).appendTo($("#ul"));
                                $(".liDeputy:eq("+(index)+")").find('i').css("display","none");
                                $(".liDeputy:eq("+(index)+")").find('.imgDeputy').css("display","block");
                                $(".liDeputy:eq("+(index)+")").find('.imgDeputy').attr("src",v.base64);
                                $(".liDeputy:eq("+(index)+")").find('.imgDeputy').attr("title",v.id);
                                $(".liDeputy:eq("+(index)+")").find('.col-md-12').next("h4").html(v.name)
                                $(".liDeputy:eq("+(index)+")").find("h4").html(v.name)
                                $(".liDeputy:eq("+(index)+")").find(".deleteImg").css("display","block");
                                index++;
                            }
                        })
                        /*最后一条*/
                        $("#ul").find(".btnDeputy:last").find('i').css("display","block");
                        $("#ul").find('.imgDeputy:last').css("display","none");
                        $("#ul").find(".imgDeputy:last").attr("src","");
                        $("#ul").find(".imgDeputy:last").removeAttr("title");
                        $("#ul").find(".deleteImg:last").css("display","none");
                    }else{
                        $("#imgMain").find("i").css("display","block");
                        $("#imgMain").next("a").css("display","none");
                        $("#base64Img").css("display","none");
                        $("#base64Img").attr("src","");
                        $("#main").next("h2").html("标题");
                    }

                })

        });
        /* 主图操作*/
        $("#imgMain").on("click",function(){
            $("#main").children("input").trigger("click");//新增
        })
        updateTitle();//修改主题
        /*当主图文件发生变化时提交图片*/
        $("#main").children("input").change(function(e){
            $("#imgTitle").next("p").remove();
            addTripMainImg(e);//新增或修改主图
        })
        var click;//用于记录当前副标题点击的当前对象
        /*副图操作*/
        $(".btnDeputy").on("click",function(){
            $("#deputy").children("input").trigger("click");
            click = $(this);
        })
        updateDeputyTitle();//修改副图片标题
        /*当副图文件发生变化时提交图片*/
        $("#deputy").children("input").change(function(e){
            $("#imgTitle").next("p").remove();
            addTripDeputyImg(click,e);
        })
        deleteImg();//删除图片

        /*主题标题发生变化时*/
        $("#themeTitle").bind('DOMNodeInserted',function(){
                themeAjaxEdit();
        });
        /*价格标题发生变化时*/
        $("#priceTitle").bind('DOMNodeInserted',function(){
            /*清空*/
            $("#dateDay").val("");
            $("input[name='priceDay']").val("");
            $("input[name='date']").val(""); //获取区间日期
            $("input[name='price']").val(""); //获取单价
            $("#day").next("p").remove(); //删除提示
            $("#pricesSave").next("p").remove(); //删除提示
            $("#dateH2").next("p").remove();//删除提示
            /*对日期遍历*/
            yearDate();//修改年份月份
            //获取id
            var tripId =$("#priceTitle").children("span").text();
            var year = $("#year").text().substring(0,$("#year").text().length-1);
            var month = $("#month").text().substring(0,$("#month").text().length-1);;
            $("#priceDay").find("tr").remove();
            findAlldate(year,month,tripId);
            updatePrice();//修改或删除价格
        });


        $('[data-toggle="tooltip"]').tooltip()
        /*产品详情样式*/
        $("#myTabs a").click(function(){
            var href= $(this).attr('href');
            $("#myTabs a").css({"backgroundColor":"#FFFFFF","color":"black"})
            $(this).css({"backgroundColor":"#00838F","color":"white"});
            var id = href.substring(1,href.length)
            $("#myTabs").nextAll("div").css("display","none");
            $("#"+id).css("display","block");
        })

        //修改详情页
        updataDetail($("#place"))
        updataDetail($("#hotel"))
        updataDetail($("#food"))

        $("input[name='province']").click(function () {
            init();
        })
        /*外部引用js方法*/
        expansion(); //效果
        startSave(); //保存
        /*价格操作*/

        priceDayadd();//单日价格
        pricesSave();//多日价格
       var getYear = $("#year").text().trim();
        var getMonth =  $("#month").text().trim();
        priceDate(getYear,getMonth);//按日期查询价格

        /* AJAX提交前后的动画效果*/
        $(document).ajaxStart(function(){
            $(".wait").css("display","block");
        });
        $(document).ajaxComplete(function(){
            $(".wait").css("display","none");
        });
        addTrip();//生成表单操作
        setInterval(function(){
            titleIndent($(".vtitle"));
            titleIndent($(".vstitle"));
        },500)
    });
    /*修改日程标题*/
    function updateDates(object){
        var clazz = object.attr("class");
        if(clazz == "hotel"){ //酒店
            object.on("keyup",function(){
                var id = $(this).parents(".li").attr("id");//获取id
                var value = $(this).text().trim();
                if(value !=""){
                    var url = "/admin/trip/dates/ajax?act=update";
                    $.post(url,{hotel:value,id:id},function(data){
                    })
                }else{
                    $(this).text("暂无信息");
                }
            })
        }else if(clazz == "dates"){//住宿
            object.on("keyup",function(){
                var id = $(this).parents(".li").attr("id");//获取id
                var value = $(this).text().trim();
                if(value !=""){
                    var url = "/admin/trip/dates/ajax?act=update";
                    $.post(url,{meal:value,id:id},function(data){
                    })
                }else{
                    $(this).text("暂无信息");
                }
            })
        }else if(clazz == "traffic"){
            object.on("keyup",function(){
                var id = $(this).parents(".li").attr("id");//获取id
                var value = $(this).text().trim();
                if(value !=""){
                    var url = "/admin/trip/dates/ajax?act=update";
                    $.post(url,{traffic:value,id:id},function(data){
                    })
                }else{
                    $(this).text("暂无信息");
                }
            })
        }else if(clazz =="datesDetail"){
            object.on("keyup",function(){
                var id = $(this).parents(".li").attr("id");//获取id
                var value = $(this).text().trim();
                if(value !=""){
                    var url = "/admin/trip/dates/ajax?act=update";
                    $.post(url,{detail:value,id:id},function(data){
                    })
                }else{
                    $(this).text("暂无信息");
                }
            })
        }else if(clazz =="prompt"){
            object.on("keyup",function(){
                var id = $(this).parents(".li").attr("id");//获取id
                var value = $(this).text().trim();
                if(value !=""){
                    var url = "/admin/trip/dates/ajax?act=update";
                    $.post(url,{prompt:value,id:id},function(data){
                    })
                }else{
                    $(this).text("暂无信息");
                }
            })
        }else{
            object.find("span:eq(1)").on("keyup",function(){
                var id = $(this).parents(".li").attr("id");//获取id
                var value = $(this).text().trim();
                console.log(value);
                if(value !=""){
                    var url = "/admin/trip/dates/ajax?act=update";
                    $.post(url,{title:value,id:id},function(data){
                    })
                }else{
                    $(this).text("暂无信息");
                }
            })
        }
    }

    /*查询时间日期*/
    function priceDate(year,month){
        var year ;
        var month;
        setInterval(function(){
            var getYear = $("#year").text().trim();
            var getMonth = $("#month").text().trim();
            if(year!=getYear || month!=getMonth){
                $("#dateH2").next("p").remove();//删除提示
                year = getYear;
                month = getMonth;
                var tripId =$("#priceTitle").children("span").text();
                var years = year.substring(0,year.length-1);
                var months = month.substring(0,month.length-1);
                findAlldate(years,months,tripId);
            }
        },500);
    }
    /*返回Ajax数据Get 同步请求*/
    function AjaxGetRequest(url){
        var value;
        $.ajax({
            type:"get",
            contentType:'application/json,charset=utf-8',
            url:url,
            async:false,
            success:function(data){
                value = data;
            }
        });
        return value;
    }
    //年选择器
    laydate.render({
        elem: '#year'
        ,type: 'year'
        ,format: 'yyyy年'
    });
    //月选择器选择器
    laydate.render({
        elem: '#month'
        ,type: 'month'
        ,format: 'M月'
    });
    /*单日期选择*/
    laydate.render({
        elem: '#dateDay'
        ,min: new Date().getFullYear()+"-"+(new Date().getMonth()+1)+"-"+new Date().getDate()
    });
    /*价格日期时间选择器*/
    laydate.render({
        elem: '#date'
        , type: 'datetime'
        ,min: new Date().getFullYear()+"-"+(new Date().getMonth()+1)+"-"+new Date().getDate()
        ,max: (new Date().getFullYear()+1)+"-"+(new Date().getMonth())+"-"+1
        , range: '—'
        , format: 'yyyy-M-d',
        theme: '#00838F'
    });
</script>
</html>